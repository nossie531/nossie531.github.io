<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
	<head>
		<title>Rust メモ: バージョンの切替</title>
		<link rel="stylesheet" href="style/base.css"/>
		<script src="../../lib/doc.js"></script>
		<script src="lib/base.js"></script>
	</head>
	<body>
		<header>
			<h1><doc-title/></h1>
		</header>
		<p>
ビルドツールのバージョンの切替について。
		</p> <p>
(ナイトリーへの変更方法を例に紹介している。)
		</p> 
		<section>
			<h1>インストール</h1>
			<p>
以下のコマンドを実行。
			</p>
<pre><code class="console">
<mark class="prompt">&gt;</mark> rustup install nightly
</code></pre>
		</section> <section>
			<h1>バージョンの切替</h1>
			<p>
方法は幾つかあるが、ここではよく使うもののみを紹介する。
			</p> <p>
他の方法や優先順位については、後述の『<a href="#spec">補足: 仕様詳細</a>』を参照。
			</p>
			<section>
				<h2>デフォルトの切替</h2>
				<p>
以下のコマンドを実行する。
				</p>
<pre><code class="console">
<mark class="prompt">&gt;</mark> rustup default nightly
</code></pre>
				<p>
なお、この方法は IDE からのビルド時にも有効である。
				</p>
			</section> <section>
				<h2>ディレクトリ単位の切替</h2>
				<p>
プロジェクトのルートディレクトリに <code>rust-toolchain.toml</code> を配置する。
				</p> 
<pre><code class="language-toml">
[toolchain]
channel = "nightly"
</code></pre>
				<p>
なお、この方法は IDE からのビルド時にも有効である。
				</p>
			</section> <section>
				<h2>一時的な切替</h2>
				<p>
コマンドをバージョン指定で実行する。
				</p> <p>
<code>rustup</code> からの場合、以下のように実行する。
				</p>
<pre><code class="console">
<mark class="prompt">&gt;</mark> rustup run nightly cargo build
</code></pre>
				<p>
<code>cargo</code> からの場合、以下のように実行する。
				</p>
<pre><code class="console">
<mark class="prompt">&gt;</mark> cargo +nightly build
</code></pre>
			</section>
		</section> <section>
			<h1>バージョンの確認</h1>
			<p>
<code>rustup show</code> コマンドでバージョンの確認ができる。
			</p>
			<section>
				<h2>サンプル</h2>
				<p>
以下では、<code>stable</code> と <code>nightly</code> がインストールされており、選択されているのは後者で、またそれが <code>rust-toolchain.toml</code> ファイルの影響である事が分かる。
				</p>
<pre><code class="console">
<mark class="prompt">&gt;</mark> rustup show
Default host: x86_64-pc-windows-msvc
rustup home:  C:\Users\nossi\.rustup

installed toolchains
--------------------

stable-x86_64-pc-windows-msvc (default)
nightly-x86_64-pc-windows-msvc

active toolchain
----------------

nightly-x86_64-pc-windows-msvc (overridden by 'D:\development\rust_test\rust-toolchain.toml')
rustc 1.81.0-nightly (5affbb171 2024-07-18)
</code></pre>
			</section>
		</section> <section>
			<h1 id="spec">補足: 仕様詳細</h1>
			<p>
以下は <code>rustup</code> の公式の説明。
			</p>
			<doc-quote src="quote/rustup/overrides.xhtml"/>
		</section>
	</body>
</html>
