<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
	<head>
		<title>Rust メモ: bool から Option への変換</title>
		<link rel="stylesheet" href="style/base.css"/>
		<script src="../../lib/doc.js"></script>
		<script src="lib/base.js"></script>
	</head>
	<body>
		<header>
			<h1><script>Doc.insertTitle();</script></h1>
		</header>
		<p>
<a href="https://doc.rust-lang.org/std/primitive.bool.html"><code>bool</code></a> 型から <a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>Option</code></a> 型への変換。
		</p> 
		<aside class="normal">
			<p>
このメモの背景。
			</p> <p>
知っていると便利なマイナー機能なのでメモ。
			</p>
		</aside>
		<section>
			<h1>仕様</h1>
			<p>
以下の関数を使うと、<code>if</code> 式での分岐が不要になる。
			</p>
			<dl class="normal">
				<dt id="then_some">
<a href="https://doc.rust-lang.org/std/primitive.bool.html#method.then_some"><code>then_some</code></a>
				</dt>
				<dd>
					<p>
<code>false</code> なら <a href="https://doc.rust-lang.org/std/option/enum.Option.html#variant.None"><code>None</code></a> へ、<code>true</code> なら <a href="https://doc.rust-lang.org/std/option/enum.Option.html#variant.Some"><code>Some</code></a> でラップした指定値へ、それぞれ変換する。
					</p>
				</dd>
				<dt>
<a href="https://doc.rust-lang.org/std/primitive.bool.html#method.then"><code>then</code></a>
				</dt>
				<dd>
					<p>
<a href="#then_some"><code>then_some</code></a> とほぼ同じだが、指定値の生成にクロージャを使用する。
					</p>
				</dd>
			</dl>
		</section> <section>
			<h1>サンプル</h1>
			<p>
以下では、空文字列を <code>None</code> に変換している。
			</p>
<pre><code class="language-rust">
fn main() {
    assert_eq!(get_some_text(""), None);
    assert_eq!(get_some_text("test"), Some("test"));
}

fn get_some_text(text: &amp;str) -&gt; Option&lt;&amp;str&gt; {
    (!text.is_empty()).then_some(text)
}
</code></pre>
		</section>
	</body>
</html>
